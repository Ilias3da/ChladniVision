# 克拉尼图形分类数据集准备指南

## 概述

本指南将帮助您准备用于克拉尼图形分类的数据集。基于KNN+Dense SIFT的方法，我们需要收集足够数量和质量的克拉尼图形图像来训练分类器。

## 1. 数据集规模建议

### 最小数据集（快速验证）
- **每个类别**: 15-20张图像
- **总类别数**: 3-4个不同的克拉尼模式
- **总图像数**: 45-80张
- **适用场景**: 概念验证、快速测试

### 推荐数据集（实际应用）
- **每个类别**: 30-50张图像
- **总类别数**: 4-6个不同的克拉尼模式
- **总图像数**: 120-300张
- **适用场景**: 实际演示、较好的分类性能

### 理想数据集（最佳性能）
- **每个类别**: 50-100张图像
- **总类别数**: 6-8个不同的克拉尼模式
- **总图像数**: 300-800张
- **适用场景**: 高精度分类、研究用途

## 2. 克拉尼图形类别建议

根据克拉尼板的物理特性，建议收集以下类型的图形：

### 基础模式类别
1. **圆形模式** (Circular Patterns)
   - 同心圆环状图形
   - 频率范围：低频 (50-200 Hz)
   
2. **放射模式** (Radial Patterns)
   - 从中心向外辐射的线条
   - 频率范围：中频 (200-500 Hz)
   
3. **网格模式** (Grid Patterns)
   - 规则的网格状图形
   - 频率范围：中高频 (400-800 Hz)
   
4. **复合模式** (Complex Patterns)
   - 圆形+放射的组合图形
   - 频率范围：高频 (600-1000 Hz)

### 进阶模式类别（可选）
5. **螺旋模式** (Spiral Patterns)
6. **花瓣模式** (Petal Patterns)
7. **星形模式** (Star Patterns)
8. **不规则模式** (Irregular Patterns)

## 3. 图像采集要求

### 3.1 技术规格
- **分辨率**: 最低 800x600 像素，推荐 1024x768 或更高
- **格式**: JPG, PNG, BMP（推荐PNG以保持质量）
- **色彩**: 彩色或灰度均可，系统会自动转换为灰度
- **文件大小**: 每张图像 100KB - 5MB

### 3.2 拍摄条件
- **光照**: 均匀照明，避免强烈阴影
- **背景**: 尽量使用深色背景突出沙粒图形
- **角度**: 垂直俯拍，避免倾斜角度
- **距离**: 保持一致的拍摄距离
- **稳定性**: 使用三脚架确保图像清晰

### 3.3 图像质量要求
- **清晰度**: 图形边缘清晰可见
- **对比度**: 沙粒与背景有明显对比
- **完整性**: 图形完整，不被截断
- **噪声**: 最小化背景噪声和干扰

## 4. 数据集组织结构

### 4.1 目录结构
```
chladni_dataset/
├── circular/          # 圆形模式
│   ├── circular_001.png
│   ├── circular_002.png
│   └── ...
├── radial/            # 放射模式
│   ├── radial_001.png
│   ├── radial_002.png
│   └── ...
├── grid/              # 网格模式
│   ├── grid_001.png
│   ├── grid_002.png
│   └── ...
└── complex/           # 复合模式
    ├── complex_001.png
    ├── complex_002.png
    └── ...
```

### 4.2 命名规范
- **格式**: `{类别名}_{序号}.{扩展名}`
- **示例**: `circular_001.png`, `radial_015.jpg`
- **序号**: 使用3位数字，从001开始
- **类别名**: 使用英文，小写，无空格

## 5. 数据收集策略

### 5.1 实验参数变化
为了增加数据多样性，建议在以下参数上进行变化：

- **频率**: 在每个模式的频率范围内变化
- **振幅**: 调整振动强度
- **沙粒密度**: 使用不同密度的沙粒
- **板材**: 不同材质或厚度的板材
- **边界条件**: 不同的固定方式

### 5.2 数据增强考虑
系统会自动进行以下数据增强：
- 直方图均衡化
- 高斯滤波去噪
- 尺寸标准化

因此采集时重点关注：
- **模式多样性**: 同一类别内的不同变体
- **质量一致性**: 保持拍摄条件的一致性

## 6. 数据质量检查

### 6.1 自动检查
使用提供的脚本进行数据质量检查：

```python
# 检查数据集
from utils.chladni_preprocessor import ChladniDataPreprocessor

preprocessor = ChladniDataPreprocessor()
preprocessor.load_images_from_directory('path/to/your/dataset')
info = preprocessor.get_dataset_info()
print(info)
```

### 6.2 手动检查清单
- [ ] 每个类别至少有15张图像
- [ ] 图像清晰度良好
- [ ] 类别分布相对均衡
- [ ] 文件命名规范
- [ ] 目录结构正确
- [ ] 无损坏或无法读取的文件

## 7. 快速开始方案

### 方案A：使用演示数据集
如果暂时没有实际数据，可以使用系统生成的演示数据集：

```bash
# 生成演示数据
python chladni_classifier.py --create_demo --demo_dir demo_data

# 训练模型
python chladni_classifier.py --data_dir demo_data
```

### 方案B：最小可行数据集
1. **选择3个基础模式**: 圆形、放射、网格
2. **每个模式拍摄15-20张图像**
3. **总计45-60张图像**
4. **预期训练时间**: 2-5分钟
5. **预期准确率**: 70-85%

### 方案C：推荐数据集
1. **选择4-5个模式**: 圆形、放射、网格、复合、螺旋
2. **每个模式拍摄30-40张图像**
3. **总计120-200张图像**
4. **预期训练时间**: 5-15分钟
5. **预期准确率**: 85-95%

## 8. 性能预期

### 8.1 准确率预期
| 数据集规模 | 图像质量 | 预期准确率 | 训练时间 |
|------------|----------|------------|----------|
| 小型(45-80张) | 良好 | 70-85% | 2-5分钟 |
| 中型(120-300张) | 良好 | 85-95% | 5-15分钟 |
| 大型(300-800张) | 优秀 | 90-98% | 15-30分钟 |

### 8.2 影响因素
- **类别间差异**: 差异越大，分类越容易
- **类内一致性**: 同类图像越相似，效果越好
- **图像质量**: 清晰度直接影响特征提取质量
- **数据平衡**: 各类别数量应相对均衡

## 9. 常见问题解决

### Q1: 图像模糊怎么办？
**A**: 使用三脚架，确保充足光照，调整相机对焦

### Q2: 背景干扰太多？
**A**: 使用深色背景布，清理实验台面

### Q3: 同一频率产生不同图形？
**A**: 这是正常现象，可以作为同一类别的不同样本

### Q4: 类别难以区分？
**A**: 增大频率差异，或重新定义类别标准

### Q5: 数据集不平衡？
**A**: 补充数量较少的类别，或使用数据增强

## 10. 进阶建议

### 10.1 数据集扩展
- **时间序列**: 记录图形形成过程
- **多角度**: 从不同角度拍摄同一图形
- **参数记录**: 记录对应的频率、振幅等参数

### 10.2 质量提升
- **标准化流程**: 建立标准的拍摄流程
- **质量评估**: 定期评估和筛选图像质量
- **持续更新**: 根据分类效果持续优化数据集

---

## 联系与支持

如果在数据集准备过程中遇到问题，可以：
1. 查看系统日志和错误信息
2. 使用可视化功能检查数据加载情况
3. 联系技术支持团队

**祝您数据收集顺利！**